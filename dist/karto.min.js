!function n(t,e,r){function i(a,u){if(!e[a]){if(!t[a]){var l="function"==typeof require&&require
if(!u&&l)return l(a,!0)
if(o)return o(a,!0)
var s=new Error("Cannot find module '"+a+"'")
throw s.code="MODULE_NOT_FOUND",s}var c=e[a]={exports:{}}
t[a][0].call(c.exports,function(n){var e=t[a][1][n]
return i(e?e:n)},c,c.exports,n,t,e,r)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a])
return i}({1:[function(n,t,e){var r=n("./index")
window.karto=r},{"./index":2}],2:[function(n,t,e){var r=n("./lib/svg/index"),i=n("./lib/canvas/index"),o=n("idris-geojson-bbox")
e.svg=function(n,t,e,i){var o=new r(n,t,e,i)
return o},e.canvas=function(n,t,e,r){var o=new i(n,t,e,r)
return o},e.getCollectionBbox=function(n,t){o(n,function(n){t(n)})},e.getJSON=function(n,t){var e=new XMLHttpRequest
e.open("GET",n,!0),e.onload=function(){if(e.status>=200&&e.status<400){var r=JSON.parse(e.responseText)
t(null,r)}else t("ERROR: "+n+" Connected to server but it returned an error.",null)},e.onerror=function(){t("ERROR: "+n+" Could not connect to server",null)},e.send()}},{"./lib/canvas/index":9,"./lib/svg/index":33,"idris-geojson-bbox":46}],3:[function(n,t,e){t.exports=function(n,t){var e=this
return e.type="rect",e.width=t.size.width,e.height=t.size.height,e.fill=n,e.layer=0,e.draw=function(n){var t=n.ctx
t.beginPath(),t.rect(0,0,e.width,e.height),t.fillStyle=e.fill,t.fill()},this}},{}],4:[function(n,t,e){function r(n,t,e){var r=e.proj.projection,a=n.properties[t.prop],u=t.style,l=t.transform,s=e.ctx
s.beginPath(),void 0===u.opacity?s.globalAlpha=1:s.globalAlpha=u.opacity
var c=n.geometry.coordinates
c[0]<-179.99?c[0]=-179.99:c[0]>179.99&&(c[0]=179.99),c[1]<-85?c[1]=-85:c[1]>85&&(c[1]=85)
var f=r(c)
if(void 0!==l){var p=l[0],h=l[1]
isNaN(p)===!1&&(f[0]=f[0]+p),isNaN(h)===!1&&(f[1]=f[1]+h)}s.font=i(u),s.textAlign=o(u),void 0!==u.fill&&"none"!==u.fill&&(s.fillStyle=u.fill,s.fillText(a,f[0],f[1])),void 0!==u.stroke&&"none"!==u.stroke&&(s.strokeStyle=u.stroke,void 0===u["stroke-width"]?s.lineWidth=1:s.lineWidth=u["stroke-width"],s.strokeText(a,f[0],f[1]))}function i(n){return n["font-size"]+" "+n["font-family"]}function o(n){return"middle"===n["text-anchor"]?"center":n["text-anchor"]}var a=n("./points/clean-features"),u=n("./points/set-default-style").labels
t.exports=function(n,t,e,i,o){var l=this
return l.features=a(n.features),l.style=u(e),l.layer=1,l.prop=t,l.transform=i,l.draw=function(n){l.features.forEach(function(t){r(t,l,n)})},this}},{"./points/clean-features":13,"./points/set-default-style":14}],5:[function(n,t,e){function r(n,t,e){var r=e.proj.projection,i=e.ctx
i.beginPath(),void 0===t.opacity?i.globalAlpha=1:i.globalAlpha=t.opacity
var o=n.geometry.coordinates
o.forEach(function(n,t){n[0]<-179.99?n[0]=-179.99:n[0]>179.99&&(n[0]=179.99),n[1]<-85?n[1]=-85:n[1]>85&&(n[1]=85)
var e=r(n)
0===t?i.moveTo(e[0],e[1]):i.lineTo(e[0],e[1])}),void 0!==t.fill&&"none"!==t.fill&&(i.fillStyle=t.fill,i.fill()),void 0!==t.stroke&&"none"!==t.stroke&&(i.strokeStyle=t.stroke,i.lineWidth=t["stroke-width"],i.lineJoin=t["line-join"],i.lineCap=t["line-cap"],i.stroke())}var i=n("./lines/clean-features"),o=n("./lines/set-default-style")
t.exports=function(n,t,e){var a=this
return a.features=i(n.features),a.style=o(t),a.layer=1,a.draw=function(n){a.features.forEach(function(t){r(t,a.style,n)})},a.addLabels=function(){console.log("karto.canvas().lines() does not have .addLabels(), use karto.svg().lines() instead")},this}},{"./lines/clean-features":10,"./lines/set-default-style":11}],6:[function(n,t,e){function r(n,t,e){var r=e.proj.projection,i=t.style,o=t.img,a=n.geometry.coordinates,u=e.ctx
if(u.beginPath(),void 0===this.opacity?u.globalAlpha=1:u.globalAlpha=i.opacity,void 0!==i.width&&void 0!==i.height)var l=i.width,s=i.height
else if(void 0!==i.width&&void 0===i.height)var l=i.width,s=l/o.naturalWidth*o.naturalHeight
else if(void 0===i.width&&void 0!==i.height)var s=i.height,l=s/o.naturalHeight*o.naturalWidth
else var l=o.naturalWidth,s=o.naturalHeight
var c=l/2,f=s/2
void 0!==i&&void 0!==i.iconAnchor&&(c=i.iconAnchor[0],f=i.iconAnchor[1])
var p=r(a)
p[0]=p[0]-c,p[1]=p[1]-f,u.drawImage(o,p[0],p[1],l,s)}var i=n("./points/clean-features"),o=n("./points/set-default-style").markers,a=n("./points/add-image-file")
t.exports=function(n,t,e,u){u.imagesLoading=u.imagesLoading+1
var l=this
return l.features=i(n.features),l.style=o(e),l.layer=1,l.img=a(t,u),l.draw=function(n){l.features.forEach(function(t){r(t,l,n)})},this}},{"./points/add-image-file":12,"./points/clean-features":13,"./points/set-default-style":14}],7:[function(n,t,e){function r(n,t,e){var r=e.proj.projection,i=e.ctx
for(i.beginPath(),void 0===t.opacity?i.globalAlpha=1:i.globalAlpha=t.opacity,k=0;k<n.geometry.coordinates.length;k++){var o=n.geometry.coordinates[k]
o.forEach(function(n,t){n[0]<-179.99?n[0]=-179.99:n[0]>179.99&&(n[0]=179.99),n[1]<-85?n[1]=-85:n[1]>85&&(n[1]=85)
var e=r(n)
0===t?i.moveTo(e[0],e[1]):i.lineTo(e[0],e[1])})}i.closePath(),void 0!==t.fill&&"none"!==t.fill&&(i.fillStyle=t.fill,i.fill()),void 0!==t.stroke&&"none"!==t.stroke&&(i.strokeStyle=t.stroke,i.lineWidth=t["line-width"],i.lineJoin=t["line-join"],i.lineCap=t["line-cap"],i.stroke())}var i=n("./polygons/clean-features"),o=n("./polygons/set-default-style")
t.exports=function(n,t,e){var a=this
return a.features=i(n.features),a.style=o(t),a.layer=1,a.draw=function(n){a.features.forEach(function(t){r(t,a.style,n)})},this}},{"./polygons/clean-features":15,"./polygons/set-default-style":16}],8:[function(n,t,e){var r=n("./tiles/parse-url"),i=n("./tiles/check-options"),o=n("./tiles/get-zoom-level"),a=n("./tiles/find-tiles"),u=n("./tiles/get-tiles-info"),l=n("./tiles/load-imgs")
t.exports=function(n,t,e,s,c){var f=this
return void 0===n&&(n="http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),f.url=n,f.parsedUrl=r(f.url),f.options=i(t,f.parsedUrl),void 0===s&&(s=o(f,c)),f.z=s,void 0===e&&(e=1),f.opacity=e,f.tiles=a(f,c),f.tilesInfo=u(f,c),f.loadImgs=l(f,c),f.draw=function(){var n=c.ctx,t=f.tilesInfo
t.forEach(function(t){n.beginPath(),void 0===f.opacity?n.globalAlpha=1:n.globalAlpha=f.opacity,n.drawImage(t.img,t.x,t.y,t.width,t.height)})},this}},{"./tiles/check-options":18,"./tiles/find-tiles":19,"./tiles/get-tiles-info":21,"./tiles/get-zoom-level":23,"./tiles/load-imgs":24,"./tiles/parse-url":25}],9:[function(n,t,e){function r(n){0===n.imagesLoading?o(n):setTimeout(function(){console.log("waiting for "+n.imagesLoading+" images"),r(n)},10)}function o(n){var t=n.ctx,e=n.objs.sort(function(n,t){return n.layer-t.layer})
for(t.clearRect(0,0,n.size.width,n.size.height),i=0;i<e.length;i++){var r=e[i]
r.draw(n)}}function a(n,t){var e=document.createElement("canvas")
return e.setAttribute("width",t.width),e.setAttribute("height",t.height),n.appendChild(e),e}var u=n("../get-proj"),l=n("../file-saver"),s=n("./Background"),c=n("./Polygons"),f=n("./Lines"),p=n("./Labels"),h=n("./Markers"),d=n("./Tiles")
t.exports=function(n,t,e,i){var o=this
o.id=Date.now(),o.div=document.getElementById(n),o.size={width:t,height:e},o.canvas=a(o.div,o.size),o.ctx=o.canvas.getContext("2d"),o.objs=[],o.imgs=[],o.bbox=i,o.proj=u(o.size,o.bbox),o.imagesLoading=0,o.imagesDoneLoading=function(){o.imagesLoading=o.imagesLoading-1},o.background=function(n){var t=new s(n,o)
return o.objs.push(t),t},o.tiles=function(n,t,e,r){var i=new d(n,t,e,r,o)
return o.objs.push(i),i},o.polygons=function(n,t){var e=new c(n,t,o)
return o.objs.push(e),e},o.lines=function(n,t){var e=new f(n,t,o)
return o.objs.push(e),e},o.labels=function(n,t,e,r){var i=new p(n,t,e,r,o)
return o.objs.push(i),i},o.markers=function(n,t,e){var r=new h(n,t,e,o)
return o.objs.push(r),r},o.draw=function(){r(o)},o.downloadButton=function(){var n=document.createElement("button")
n.innerHTML="Download",n.style.position="fixed",n.style.top="10px",n.style.left="10px",o.div.appendChild(n),n.onclick=function(){o.canvas.toBlob(function(n){l(n,"map.png")})}}}},{"../file-saver":26,"../get-proj":27,"./Background":3,"./Labels":4,"./Lines":5,"./Markers":6,"./Polygons":7,"./Tiles":8}],10:[function(n,t,e){t.exports=function(n){var t=[]
return n.forEach(function(n){if("LineString"===n.geometry.type)t.push(n)
else if("MultiLineString"===n.geometry.type){var e=n.geometry.coordinates,r=n.properties
e.forEach(function(n){var e={type:"Feature",properties:r,geometry:{type:"LineString",coordinates:n}}
t.push(e)})}}),t}},{}],11:[function(n,t,e){t.exports=function(n){var t={opacity:1,fill:"none",stroke:"black","stroke-width":1,"line-join":"round","line-cap":"round"}
if(void 0!==n)for(k in n)t[k]=n[k]
return t}},{}],12:[function(n,t,e){t.exports=function(n,t){var e=new Image
return e.addEventListener("load",function(){t.imagesDoneLoading()},!1),e.src=n,e}},{}],13:[function(n,t,e){t.exports=function(n){var t=[]
return n.forEach(function(n){if("Point"===n.geometry.type)t.push(n)
else if("MultiPoint"===n.geometry.type){var e=n.geometry.coordinates,r=n.properties
e.forEach(function(n){var e={type:"Feature",properties:r,geometry:{type:"Point",coordinates:n}}
t.push(e)})}}),t}},{}],14:[function(n,t,e){e.labels=function(n){var t={opacity:1,fill:"black",stroke:"none","font-family":"sans-serif","font-size":"10px","text-anchor":"middle"}
if(void 0!==n)for(k in n)t[k]=n[k]
return t},e.markers=function(n){var t={opacity:1}
if(void 0!==n)for(k in n)t[k]=n[k]
return t}},{}],15:[function(n,t,e){t.exports=function(n){var t=[]
return n.forEach(function(n){if("Polygon"===n.geometry.type)t.push(n)
else if("MultiPolygon"===n.geometry.type){var e=n.geometry.coordinates,r=n.properties
e.forEach(function(n){var e={type:"Feature",properties:r,geometry:{type:"Polygon",coordinates:n}}
t.push(e)})}}),t}},{}],16:[function(n,t,e){t.exports=function(n){var t={opacity:1,fill:"black",stroke:"none","line-width":1,"line-join":"round","line-cap":"round"}
if(void 0!==n)for(k in n)t[k]=n[k]
return t}},{}],17:[function(n,t,e){var r=n("tilebelt")
t.exports=function(n,t,e){var i=r.pointToTileFraction(n[0],n[1],e),o=r.pointToTileFraction(t[0],t[1],e),a=256*(o[0]-i[0])
return a}},{tilebelt:48}],18:[function(n,t,e){t.exports=function(n,t){var e={subdomains:"abc"}
for(k in n)e[k]=n[k]
var r=[]
return t.forEach(function(n){"var"===n.type&&("s"===n.key?n.val=e.subdomains:"x"!==n.key&&"y"!==n.key&&"z"!==n.key&&(void 0===e[n.key]?r.push(n.key):n.val=e[n.key]))}),0===r.length?t:(console.log("ERROR: some attributes are missing to parse Tiles URL:"),r.forEach(function(n){console.log(" * "+n)}),null)}},{}],19:[function(n,t,e){var r=n("tilebelt")
t.exports=function(n,t){if(null===n.options)return null
var e=t.bbox,i=r.pointToTile(e[0],e[3],n.z),o=r.pointToTile(e[2],e[1],n.z),a=[]
for(x=i[0];x<o[0]+1;x++)for(y=i[1];y<o[1]+1;y++)a.push([x,y,n.z])
return a}},{tilebelt:48}],20:[function(n,t,e){var r=n("tilebelt")
t.exports=function(n,t){var e=r.tileToBBOX(n),i=t([e[0],e[3]]),o=t([e[2],e[1]]),a={x:i[0],y:i[1],width:o[0]-i[0],height:o[1]-i[1]}
return a}},{tilebelt:48}],21:[function(n,t,e){var r=n("./get-position"),i=n("./get-url")
t.exports=function(n,t){if(null===n.options)return null
var e=n.tiles,o=n.parsedUrl,a=[]
return e.forEach(function(n){var e=r(n,t.proj.projection)
e.url=i(o,n),a.push(e)}),a}},{"./get-position":20,"./get-url":22}],22:[function(n,t,e){t.exports=function(n,t){var e=""
return n.forEach(function(n){"string"===n.type?e+=n.val:"var"===n.type&&(e+="x"===n.key?t[0]:"y"===n.key?t[1]:"z"===n.key?t[2]:"s"===n.key?n.val[Math.floor(Math.random()*n.val.length)]:n.val)}),e}},{}],23:[function(n,t,e){var r=n("./calc-pixels"),i=n("tilebelt")
t.exports=function(n,t){for(var e=t.bbox,o=i.bboxToTile(e)[2],a=[e[0],e[1]],u=[e[2],e[1]];r(a,u,o)<t.size.width;)o++
return o}},{"./calc-pixels":17,tilebelt:48}],24:[function(n,t,e){t.exports=function(n,t){var e=n.tilesInfo
t.imagesLoading=t.imagesLoading+e.length,e.forEach(function(n){var e=new Image
e.addEventListener("load",function(){t.imagesDoneLoading(),n.img=e},!1),e.src=n.url})}},{}],25:[function(n,t,e){t.exports=function(n){var t=n.split("{"),e=[]
return t.forEach(function(n,t){if(0===t)e.push({type:"string",val:n})
else{var r=n.split("}")
e.push({type:"var",key:r[0],val:void 0}),e.push({type:"string",val:r[1]})}}),e}},{}],26:[function(n,t,e){var r=r||function(n){"use strict"
if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=n.document,e=function(){return n.URL||n.webkitURL||n},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(n){var t=new MouseEvent("click")
n.dispatchEvent(t)},a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),u=n.webkitRequestFileSystem,l=n.requestFileSystem||u||n.mozRequestFileSystem,s=function(t){(n.setImmediate||n.setTimeout)(function(){throw t},0)},c="application/octet-stream",f=0,p=500,h=function(t){var r=function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()}
n.chrome?r():setTimeout(r,p)},d=function(n,t,e){t=[].concat(t)
for(var r=t.length;r--;){var i=n["on"+t[r]]
if("function"==typeof i)try{i.call(n,e||n)}catch(o){s(o)}}},g=function(n){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\ufeff",n],{type:n.type}):n},v=function(t,s,p){p||(t=g(t))
var v,y,m,M=this,E=t.type,w=!1,x=function(){d(M,"writestart progress write writeend".split(" "))},S=function(){if(y&&a&&"undefined"!=typeof FileReader){var r=new FileReader
return r.onloadend=function(){var n=r.result
y.location.href="data:attachment/file"+n.slice(n.search(/[,;]/)),M.readyState=M.DONE,x()},r.readAsDataURL(t),void(M.readyState=M.INIT)}if((w||!v)&&(v=e().createObjectURL(t)),y)y.location.href=v
else{var i=n.open(v,"_blank")
void 0==i&&a&&(n.location.href=v)}M.readyState=M.DONE,x(),h(v)},b=function(n){return function(){return M.readyState!==M.DONE?n.apply(this,arguments):void 0}},k={create:!0,exclusive:!1}
return M.readyState=M.INIT,s||(s="download"),i?(v=e().createObjectURL(t),void setTimeout(function(){r.href=v,r.download=s,o(r),x(),h(v),M.readyState=M.DONE})):(n.chrome&&E&&E!==c&&(m=t.slice||t.webkitSlice,t=m.call(t,0,t.size,c),w=!0),u&&"download"!==s&&(s+=".download"),(E===c||u)&&(y=n),l?(f+=t.size,void l(n.TEMPORARY,f,b(function(n){n.root.getDirectory("saved",k,b(function(n){var e=function(){n.getFile(s,k,b(function(n){n.createWriter(b(function(e){e.onwriteend=function(t){y.location.href=n.toURL(),M.readyState=M.DONE,d(M,"writeend",t),h(n)},e.onerror=function(){var n=e.error
n.code!==n.ABORT_ERR&&S()},"writestart progress write abort".split(" ").forEach(function(n){e["on"+n]=M["on"+n]}),e.write(t),M.abort=function(){e.abort(),M.readyState=M.DONE},M.readyState=M.WRITING}),S)}),S)}
n.getFile(s,{create:!1},b(function(n){n.remove(),e()}),b(function(n){n.code===n.NOT_FOUND_ERR?e():S()}))}),S)}),S)):void S())},y=v.prototype,m=function(n,t,e){return new v(n,t,e)}
return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(n,t,e){return e||(n=g(n)),navigator.msSaveOrOpenBlob(n,t||"download")}:(y.abort=function(){var n=this
n.readyState=n.DONE,d(n,"abort")},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content)
"undefined"!=typeof t&&t.exports?t.exports.saveAs=r:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return r}),t.exports=r},{}],27:[function(n,t,e){function r(n){return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[n[0],n[1]]}},{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[n[2],n[3]]}}]}}var i=n("d3-geo").geo
t.exports=function(n,t){t[0]<-179.99&&(t[0]=-179.99),t[1]<-85&&(t[1]=-85),t[2]>179.99&&(t[2]=179.99),t[3]>85&&(t[3]=85)
var e=r(t),o=i.mercator().scale(1).translate([0,0]),a=i.path().projection(o),u=a.bounds(e),l=.95/Math.max((u[1][0]-u[0][0])/n.width,(u[1][1]-u[0][1])/n.height),s=[(n.width-l*(u[1][0]+u[0][0]))/2,(n.height-l*(u[1][1]+u[0][1]))/2]
return o.scale(l).translate(s),{path:a,projection:o}}},{"d3-geo":45}],28:[function(n,t,e){var r=n("./points/clean-features"),i=n("./points/append-layer").labels,o=n("./points/set-default-style")
t.exports=function(n,t,e,a,u,l){var s=this
return s.id=n,s.features=r(t),s.prop=e,s.style=o(a),s.transform=u,i(s,l),this}},{"./points/append-layer":38,"./points/clean-features":39,"./points/set-default-style":40}],29:[function(n,t,e){var r=n("./lines/clean-features"),i=n("./lines/add-labels"),o=n("./lines/append-layer"),a=n("./lines/set-default-style")
t.exports=function(n,t,e,u){var l=this
return l.id=n,l.features=r(t),l.style=a(e),l.labels=void 0,l.addLabels=function(n,t,e){l.labels=i(n,t,e,l,u)},o(l,u),this}},{"./lines/add-labels":34,"./lines/append-layer":35,"./lines/clean-features":36,"./lines/set-default-style":37}],30:[function(n,t,e){var r=n("./points/clean-features"),i=n("./points/append-layer").markers
t.exports=function(n,t,e,o,a){var u=this
return u.id=n,u.features=r(t),u.url=e,u.style=o,i(u,a),this}},{"./points/append-layer":38,"./points/clean-features":39}],31:[function(n,t,e){var r=n("./polygons/clean-features"),i=n("./polygons/set-default-style"),o=n("./polygons/append-layer")
t.exports=function(n,t,e,a){var u=this
return u.id=n,u.features=r(t),u.style=i(e),o(u,a),this}},{"./polygons/append-layer":41,"./polygons/clean-features":42,"./polygons/set-default-style":43}],32:[function(n,t,e){t.exports=function(n,t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","rect")
r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height),r.setAttribute("style","fill:"+n)
var i=document.getElementById(t)
i.appendChild(r)}},{}],33:[function(n,t,e){var r=n("../get-proj"),i=n("../file-saver"),o=n("./Lines"),a=n("./Polygons"),u=n("./Markers"),l=n("./Labels"),s=n("./background")
t.exports=function(n,t,e,c){var f=this
return f.id=Date.now(),f.div=document.getElementById(n),f.size={width:t,height:e},f.div.innerHTML='<svg width="'+f.size.width+'" height="'+f.size.height+'" id="'+f.id+'" ></svg>',f.bbox=c,f.proj=r(f.size,f.bbox),f.layerId=0,f.newLayerId=function(){return f.layerId=f.layerId+1,f.layerId},f.textPositions=[],f.background=function(n){s(n,f.id,f.size)},f.markers=function(n,t,e){var r=new u(f.newLayerId(),n.features,t,e,f)
return r},f.labels=function(n,t,e,r){var i=new l(f.newLayerId(),n.features,t,e,r,f)
return i},f.lines=function(n,t){var e=new o(f.newLayerId(),n.features,t,f)
return e},f.polygons=function(n,t){var e=new a(f.newLayerId(),n.features,t,f)
return e},f.draw=function(){console.log("karto.svg() does not need .draw()")},f.tiles=function(){console.log("karto.svg() does not have .tiles(), use karto.canvas() instead")},f.downloadButton=function(){var n=document.getElementById(f.id).innerHTML,t='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+f.size.width+'" height="'+f.size.height+'" " >'+n+"</svg>",e=document.createElement("button")
e.innerHTML="Download",e.style.position="fixed",e.style.top="10px",e.style.left="10px",e.onclick=function(){var n=new Blob([t],{type:"text/plain;charset=utf-8"})
i(n,"map.svg")},f.div.appendChild(e)},this}},{"../file-saver":26,"../get-proj":27,"./Labels":28,"./Lines":29,"./Markers":30,"./Polygons":31,"./background":32}],34:[function(n,t,e){function r(n,t){var e="layer-"+t+"-"+n,r=document.getElementById(e)
return r.getTotalLength()}function o(n){var t={"alignment-baseline":"mathematical","font-family":"sans-serif","font-size":"10px"}
if(void 0!==n)for(k in n)t[k]=n[k]
return t}function a(n,t,e,r,i){var o=document.getElementById("layer-"+t+"-labels"),a="#layer-"+t+"-"+n,u=document.createElementNS("http://www.w3.org/2000/svg","text")
u.setAttribute("style",s(r)),u.id="layer-"+t+"-"+n+"-label",u.innerHTML='<textPath xlink:href="'+a+'" startOffset="50%" text-anchor="middle" dominant-baseline="middle" >'+e+"</textPath>",o.appendChild(u)
var l=u.getBoundingClientRect()
i(l)}function u(n,t){var e=document.getElementById(n),r=document.createElementNS("http://www.w3.org/2000/svg","g")
r.id="layer-"+t+"-labels",e.appendChild(r)}function l(n,t){var e=!1,r=[]
for(y=0;y<n.length;y++){var i=!(t.right<n[y].left||t.left>n[y].right||t.bottom<n[y].top||t.top>n[y].bottom)
r.push(i)}for(z=0;z<r.length;z++)if(r[z]){e=!0
break}return e}var s=n("../utils").styleString,c=n("../utils").rmElById
t.exports=function(n,t,e,s,f){var p=s.id,h=s.features
u(f.id,p),t=o(t)
var d=+t["font-size"].split("px")[0]
for(i=0;i<h.length;i++){var g=h[i].properties[n]
if(void 0!==g&&null!==g&&""!==g){void 0!==e&&e===!0&&(g=g.toUpperCase())
var v=r(i,p)
v>g.length*d*.6&&a(i,p,g,t,function(n){l(f.textPositions,n)?c("layer-"+p+"-"+i+"-label"):f.textPositions.push(n)})}}}},{"../utils":44}],35:[function(n,t,e){var r=n("../utils").styleString
t.exports=function(n,t){var e=n.id,o=n.features,a=n.style,u=t.proj.path,l=t.id,s=document.createElementNS("http://www.w3.org/2000/svg","g")
s.id="layer-"+e
var c=""
for(i=0;i<o.length;i++)c=c+'<path id="layer-'+e+"-"+i+'" d="'+u(o[i])+'" style="'+r(a)+'"></path>'
s.innerHTML=c
var f=document.getElementById(l)
f.appendChild(s)}},{"../utils":44}],36:[function(n,t,e){function r(n){var t=n.geometry.type
if("LineString"===t){var e=n.geometry.coordinates
n.geometry.coordinates=o(e)}else{var r=n.geometry.coordinates,a=[]
for(i=0;i<r.length;i++)a.push(o(r[i]))
n.geometry.coordinates=a}return n}function o(n){var t=n[0],e=n[n.length-1]
return t[0]>e[0]&&n.reverse(),n}t.exports=function(n){var t=[]
for(i=0;i<n.length;i++)if("LineString"===n[i].geometry.type||"MultiLineString"===n[i].geometry.type){var e=r(n[i])
t.push(e)}return t}},{}],37:[function(n,t,e){t.exports=function(n){var t={fill:"none",stroke:"black","stroke-width":1,"stroke-linejoin":"round","stroke-linecap":"round"}
if(void 0!==n)for(k in n)t[k]=n[k]
return t}},{}],38:[function(n,e,r){var o=n("../utils").styleString
r.markers=function(n,t){var e=n.id,r=n.features,o=n.url,a=n.style,u=t.proj.projection,l=t.id,s=document.createElementNS("http://www.w3.org/2000/svg","g")
s.id="layer-"+e
var c=""
for(i=0;i<r.length;i++){var f=u(r[i].geometry.coordinates),p=f[0],h=f[1],d="20px",g="20px"
void 0!==a&&(void 0!==a.width&&(d=a.width),void 0!==a.height&&(g=a.height))
var v=+d.split("px")[0]/2,y=+g.split("px")[0]/2
void 0!==a&&void 0!==a.iconAnchor&&(v=a.iconAnchor[0],y=a.iconAnchor[1])
var m="translate("+-v+" "+-y+")"
c=c+'<image id="layer-'+e+"-"+i+'" xlink:href="'+o+'" x="'+p+'" y="'+h+'" width="'+d+'" height="'+g+'" transform="'+m+'" ></image>'}s.innerHTML=c
var M=document.getElementById(l)
M.appendChild(s)},r.labels=function(n,e){var r=n.id,a=n.features,u=n.prop,l=n.style,s=n.transform,c=e.proj.projection,f=e.id
void 0!==s?t='transform="translate('+s[0]+" "+s[1]+')" ':t=""
var p=document.createElementNS("http://www.w3.org/2000/svg","g")
p.id="layer-"+r
var h=""
for(i=0;i<a.length;i++){var d=a[i].properties[u]
if(void 0!==d){var g=c(a[i].geometry.coordinates),v=g[0],y=g[1]
h=h+'<text id="layer-'+r+"-"+i+'" x="'+v+'" y="'+y+'" style="'+o(l)+'" '+t+">"+d+"</text>"}}p.innerHTML=h
var m=document.getElementById(f)
m.appendChild(p)}},{"../utils":44}],39:[function(n,t,e){t.exports=function(n){var t=[]
for(i=0;i<n.length;i++)if("Point"===n[i].geometry.type)t.push(n[i])
else if("MultiPoint"===n[i].geometry.type){var e=n[i].geometry.coordinates
n[i].properties
for(j=0;j<e.length;j++)t.push({type:"Feature",properties:props,geometry:{type:"Point",coordinates:e[j]}})}return t}},{}],40:[function(n,t,e){t.exports=function(n){var t={"font-family":"sans-serif","font-size":"10px","text-anchor":"middle"}
if(void 0!==n)for(k in n)t[k]=n[k]
return t}},{}],41:[function(n,t,e){var r=n("../utils").styleString
t.exports=function(n,t){var e=n.id,o=n.features,a=n.style,u=t.proj.path,l=t.id,s=document.createElementNS("http://www.w3.org/2000/svg","g")
s.id="layer-"+e
var c=""
for(i=0;i<o.length;i++)c=c+'<path id="layer-'+e+"-"+i+'" d="'+u(o[i])+'" style="'+r(a)+'"></path>'
s.innerHTML=c
var f=document.getElementById(l)
f.appendChild(s)}},{"../utils":44}],42:[function(n,t,e){t.exports=function(n){var t=[]
for(i=0;i<n.length;i++)("Polygon"===n[i].geometry.type||"MultiPolygon"===n[i].geometry.type)&&t.push(n[i])
return t}},{}],43:[function(n,t,e){t.exports=function(n){var t={fill:"black",stroke:"none"}
if(void 0!==n)for(k in n)t[k]=n[k]
return t}},{}],44:[function(n,t,e){e.styleString=function(n){var t=""
for(k in n)t=t+k+":"+n[k]+";"
return t},e.rmElById=function(n){var t=document.getElementById(n)
t.parentNode.removeChild(t)}},{}],45:[function(n,t,e){!function(){!function(){function n(){}function e(){}function r(n,t,e){var r=e.s=n+t,i=r-n,o=r-i
e.t=n-o+(t-i)}function i(n){return n>0?1:0>n?-1:0}function o(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function a(n){return n>1?0:-1>n?zn:Math.acos(n)}function u(n){return n>1?Rn:-1>n?-Rn:Math.asin(n)}function l(n){return(n=Math.sin(n/2))*n}function s(n,t){n&&Dn.hasOwnProperty(n.type)&&Dn[n.type](n,t)}function c(n,t,e){var r,i=-1,o=n.length-e
for(t.lineStart();++i<o;)r=n[i],t.point(r[0],r[1],r[2])
t.lineEnd()}function f(n,t){var e=-1,r=n.length
for(t.polygonStart();++e<r;)c(n[e],t,1)
t.polygonEnd()}function p(){function n(n,t){n*=Bn,t=t*Bn/2+zn/4
var e=n-r,a=e>=0?1:-1,u=a*e,l=Math.cos(t),s=Math.sin(t),c=o*s,f=i*l+c*Math.cos(u),p=c*a*Math.sin(u)
Hn.add(Math.atan2(p,f)),r=n,i=l,o=s}var t,e,r,i,o
Wn.point=function(a,u){Wn.point=n,r=(t=a)*Bn,i=Math.cos(u=(e=u)*Bn/2+zn/4),o=Math.sin(u)},Wn.lineEnd=function(){n(t,e)}}function h(n){var t=n[0],e=n[1],r=Math.cos(e)
return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function d(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function g(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function v(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function y(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function m(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2])
n[0]/=t,n[1]/=t,n[2]/=t}function M(n){return[Math.atan2(n[1],n[0]),u(n[2])]}function E(n,t){return _n(n[0]-t[0])<qn&&_n(n[1]-t[1])<qn}function w(n,t){n*=Bn
var e=Math.cos(t*=Bn)
x(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function x(n,t,e){++Gn,Xn+=(n-Xn)/Gn,Qn+=(t-Qn)/Gn,Vn+=(e-Vn)/Gn}function S(){function n(n,i){n*=Bn
var o=Math.cos(i*=Bn),a=o*Math.cos(n),u=o*Math.sin(n),l=Math.sin(i),s=Math.atan2(Math.sqrt((s=e*l-r*u)*s+(s=r*a-t*l)*s+(s=t*u-e*a)*s),t*a+e*u+r*l)
Jn+=s,Yn+=s*(t+(t=a)),Zn+=s*(e+(e=u)),Kn+=s*(r+(r=l)),x(t,e,r)}var t,e,r
et.point=function(i,o){i*=Bn
var a=Math.cos(o*=Bn)
t=a*Math.cos(i),e=a*Math.sin(i),r=Math.sin(o),et.point=n,x(t,e,r)}}function b(){et.point=w}function k(){function n(n,t){n*=Bn
var e=Math.cos(t*=Bn),u=e*Math.cos(n),l=e*Math.sin(n),s=Math.sin(t),c=i*s-o*l,f=o*u-r*s,p=r*l-i*u,h=Math.sqrt(c*c+f*f+p*p),d=r*u+i*l+o*s,g=h&&-a(d)/h,v=Math.atan2(h,d)
$n+=g*c,nt+=g*f,tt+=g*p,Jn+=v,Yn+=v*(r+(r=u)),Zn+=v*(i+(i=l)),Kn+=v*(o+(o=s)),x(r,i,o)}var t,e,r,i,o
et.point=function(a,u){t=a,e=u,et.point=n,a*=Bn
var l=Math.cos(u*=Bn)
r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(u),x(r,i,o)},et.lineEnd=function(){n(t,e),et.lineEnd=b,et.point=w}}function j(n){return n}function L(n,t,e){return function(){var r=e.apply(t,arguments)
return r===t?n:r}}function N(){return!0}function T(n,t,e,r,i){var o=[],a=[]
if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t]
if(E(e,r)){i.lineStart()
for(var u=0;t>u;++u)i.point((e=n[u])[0],e[1])
return void i.lineEnd()}var l=new I(e,n,null,!0),s=new I(e,null,l,!1)
l.o=s,o.push(l),a.push(s),l=new I(r,n,null,!1),s=new I(r,null,l,!0),l.o=s,o.push(l),a.push(s)}}),a.sort(t),P(o),P(a),o.length){for(var u=0,l=e,s=a.length;s>u;++u)a[u].e=l=!l
for(var c,f,p=o[0];;){for(var h=p,d=!0;h.v;)if((h=h.n)===p)return
c=h.z,i.lineStart()
do{if(h.v=h.o.v=!0,h.e){if(d)for(var u=0,s=c.length;s>u;++u)i.point((f=c[u])[0],f[1])
else r(h.x,h.n.x,1,i)
h=h.n}else{if(d){c=h.p.z
for(var u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1])}else r(h.x,h.p.x,-1,i)
h=h.p}h=h.o,c=h.z,d=!d}while(!h.v)
i.lineEnd()}}}function P(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e
i.n=e=n[0],e.p=i}}function I(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function z(n,t,e,r){return function(i,o){function a(t,e){var r=i(t,e)
n(t=r[0],e=r[1])&&o.point(t,e)}function u(n,t){var e=i(n,t)
v.point(e[0],e[1])}function l(){m.point=u,v.lineStart()}function s(){m.point=a,v.lineEnd()}function c(n,t){g.push([n,t])
var e=i(n,t)
E.point(e[0],e[1])}function f(){E.lineStart(),g=[]}function p(){c(g[0][0],g[0][1]),E.lineEnd()
var n,t=E.clean(),e=M.buffer(),r=e.length
if(g.pop(),d.push(g),g=null,r){if(1&t){n=e[0]
var i,r=n.length-1,a=-1
for(o.lineStart();++a<r;)o.point((i=n[a])[0],i[1])
return void o.lineEnd()}r>1&&2&t&&e.push(e.pop().concat(e.shift())),h.push(e.filter(A))}}var h,d,g,v=t(o),y=i.invert(r[0],r[1]),m={point:a,lineStart:l,lineEnd:s,polygonStart:function(){m.point=c,m.lineStart=f,m.lineEnd=p,h=[],d=[],o.polygonStart()},polygonEnd:function(){m.point=a,m.lineStart=l,m.lineEnd=s,h=Pn.merge(h)
var n=O(y,d)
h.length?T(h,q,n,e,o):n&&(o.lineStart(),e(null,null,1,o),o.lineEnd()),o.polygonEnd(),h=d=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}},M=R(),E=t(M)
return m}}function A(n){return n.length>1}function R(){var t,e=[]
return{lineStart:function(){e.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:n,buffer:function(){var n=e
return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function q(n,t){return((n=n.x)[0]<0?n[1]-Rn-qn:Rn-n[1])-((t=t.x)[0]<0?t[1]-Rn-qn:Rn-t[1])}function O(n,t){var e=n[0],r=n[1],i=[Math.sin(e),-Math.cos(e),0],o=0,a=0
Hn.reset()
for(var l=0,s=t.length;s>l;++l){var c=t[l],f=c.length
if(f)for(var p=c[0],d=p[0],v=p[1]/2+zn/4,y=Math.sin(v),M=Math.cos(v),E=1;;){E===f&&(E=0),n=c[E]
var w=n[0],x=n[1]/2+zn/4,S=Math.sin(x),b=Math.cos(x),k=w-d,j=k>=0?1:-1,L=j*k,N=L>zn,T=y*S
if(Hn.add(Math.atan2(T*j*Math.sin(L),M*b+T*Math.cos(L))),o+=N?k+j*An:k,N^d>=e^w>=e){var P=g(h(p),h(n))
m(P)
var I=g(i,P)
m(I)
var z=(N^k>=0?-1:1)*u(I[2]);(r>z||r===z&&(P[0]||P[1]))&&(a+=N^k>=0?1:-1)}if(!E++)break
d=w,y=S,M=b,p=n}}return(-qn>o||qn>o&&0>Hn)^1&a}function B(n){var t,e=NaN,r=NaN,i=NaN
return{lineStart:function(){n.lineStart(),t=1},point:function(o,a){var u=o>0?zn:-zn,l=_n(o-e)
_n(l-zn)<qn?(n.point(e,r=(r+a)/2>0?Rn:-Rn),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(u,r),n.point(o,r),t=0):i!==u&&l>=zn&&(_n(e-i)<qn&&(e-=i*qn),_n(o-u)<qn&&(o-=u*qn),r=C(e,r,o,a),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(u,r),t=0),n.point(e=o,r=a),i=u},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function C(n,t,e,r){var i,o,a=Math.sin(n-e)
return _n(a)>qn?Math.atan((Math.sin(t)*(o=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(t))*Math.sin(n))/(i*o*a)):(t+r)/2}function F(n,t,e,r){var i
if(null==n)i=e*Rn,r.point(-zn,i),r.point(0,i),r.point(zn,i),r.point(zn,0),r.point(zn,-i),r.point(0,-i),r.point(-zn,-i),r.point(-zn,0),r.point(-zn,i)
else if(_n(n[0]-t[0])>qn){var o=n[0]<t[0]?zn:-zn
i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function D(n){function t(n,t){return Math.cos(n)*Math.cos(t)>o}function e(n){var e,o,l,s,c
return{lineStart:function(){s=l=!1,c=1},point:function(f,p){var h,d=[f,p],g=t(f,p),v=a?g?0:i(f,p):g?i(f+(0>f?zn:-zn),p):0
if(!e&&(s=l=g)&&n.lineStart(),g!==l&&(h=r(e,d),(E(e,h)||E(d,h))&&(d[0]+=qn,d[1]+=qn,g=t(d[0],d[1]))),g!==l)c=0,g?(n.lineStart(),h=r(d,e),n.point(h[0],h[1])):(h=r(e,d),n.point(h[0],h[1]),n.lineEnd()),e=h
else if(u&&e&&a^g){var y
v&o||!(y=r(d,e,!0))||(c=0,a?(n.lineStart(),n.point(y[0][0],y[0][1]),n.point(y[1][0],y[1][1]),n.lineEnd()):(n.point(y[1][0],y[1][1]),n.lineEnd(),n.lineStart(),n.point(y[0][0],y[0][1])))}!g||e&&E(e,d)||n.point(d[0],d[1]),e=d,l=g,o=v},lineEnd:function(){l&&n.lineEnd(),e=null},clean:function(){return c|(s&&l)<<1}}}function r(n,t,e){var r=h(n),i=h(t),a=[1,0,0],u=g(r,i),l=d(u,u),s=u[0],c=l-s*s
if(!c)return!e&&n
var f=o*l/c,p=-o*s/c,m=g(a,u),E=y(a,f),w=y(u,p)
v(E,w)
var x=m,S=d(E,x),b=d(x,x),k=S*S-b*(d(E,E)-1)
if(!(0>k)){var j=Math.sqrt(k),L=y(x,(-S-j)/b)
if(v(L,E),L=M(L),!e)return L
var N,T=n[0],P=t[0],I=n[1],z=t[1]
T>P&&(N=T,T=P,P=N)
var A=P-T,R=_n(A-zn)<qn,q=R||qn>A
if(!R&&I>z&&(N=I,I=z,z=N),q?R?I+z>0^L[1]<(_n(L[0]-T)<qn?I:z):I<=L[1]&&L[1]<=z:A>zn^(T<=L[0]&&L[0]<=P)){var O=y(x,(-S+j)/b)
return v(O,E),[L,M(O)]}}}function i(t,e){var r=a?n:zn-n,i=0
return-r>t?i|=1:t>r&&(i|=2),-r>e?i|=4:e>r&&(i|=8),i}var o=Math.cos(n),a=o>0,u=_n(o)>qn,l=gn(n,6*Bn)
return z(t,e,l,a?[0,-n]:[-zn,n-zn])}function U(n,t,e,r){return function(i){var o,a=i.a,u=i.b,l=a.x,s=a.y,c=u.x,f=u.y,p=0,h=1,d=c-l,g=f-s
if(o=n-l,d||!(o>0)){if(o/=d,0>d){if(p>o)return
h>o&&(h=o)}else if(d>0){if(o>h)return
o>p&&(p=o)}if(o=e-l,d||!(0>o)){if(o/=d,0>d){if(o>h)return
o>p&&(p=o)}else if(d>0){if(p>o)return
h>o&&(h=o)}if(o=t-s,g||!(o>0)){if(o/=g,0>g){if(p>o)return
h>o&&(h=o)}else if(g>0){if(o>h)return
o>p&&(p=o)}if(o=r-s,g||!(0>o)){if(o/=g,0>g){if(o>h)return
o>p&&(p=o)}else if(g>0){if(p>o)return
h>o&&(h=o)}return p>0&&(i.a={x:l+p*d,y:s+p*g}),1>h&&(i.b={x:l+h*d,y:s+h*g}),i}}}}}}function H(n,t,e,r){function i(r,i){return _n(r[0]-n)<qn?i>0?0:3:_n(r[0]-e)<qn?i>0?2:1:_n(r[1]-t)<qn?i>0?1:0:i>0?3:2}function a(n,t){return u(n.x,t.x)}function u(n,t){var e=i(n,1),r=i(t,1)
return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(l){function s(n){for(var t=0,e=y.length,r=n[1],i=0;e>i;++i)for(var a,u=1,l=y[i],s=l.length,c=l[0];s>u;++u)a=l[u],c[1]<=r?a[1]>r&&o(c,a,n)>0&&++t:a[1]<=r&&o(c,a,n)<0&&--t,c=a
return 0!==t}function c(o,a,l,s){var c=0,f=0
if(null==o||(c=i(o,l))!==(f=i(a,l))||u(o,a)<0^l>0){do s.point(0===c||3===c?n:e,c>1?r:t)
while((c=(c+l+4)%4)!==f)}else s.point(a[0],a[1])}function f(i,o){return i>=n&&e>=i&&o>=t&&r>=o}function p(n,t){f(n,t)&&l.point(n,t)}function h(){I.point=g,y&&y.push(m=[]),k=!0,b=!1,x=S=NaN}function d(){v&&(g(M,E),w&&b&&N.rejoin(),v.push(N.buffer())),I.point=p,b&&l.lineEnd()}function g(n,t){n=Math.max(-it,Math.min(it,n)),t=Math.max(-it,Math.min(it,t))
var e=f(n,t)
if(y&&m.push([n,t]),k)M=n,E=t,w=e,k=!1,e&&(l.lineStart(),l.point(n,t))
else if(e&&b)l.point(n,t)
else{var r={a:{x:x,y:S},b:{x:n,y:t}}
P(r)?(b||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),e||l.lineEnd(),j=!1):e&&(l.lineStart(),l.point(n,t),j=!1)}x=n,S=t,b=e}var v,y,m,M,E,w,x,S,b,k,j,L=l,N=R(),P=U(n,t,e,r),I={point:p,lineStart:h,lineEnd:d,polygonStart:function(){l=N,v=[],y=[],j=!0},polygonEnd:function(){l=L,v=Pn.merge(v)
var t=s([n,r]),e=j&&t,i=v.length;(e||i)&&(l.polygonStart(),e&&(l.lineStart(),c(null,null,1,l),l.lineEnd()),i&&T(v,a,t,c,l),l.polygonEnd()),v=y=m=null}}
return I}}function W(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function _(n){var t=0,e=zn/3,r=un(n),i=r(t,e)
return i.parallels=function(n){return arguments.length?r(t=n[0]*zn/180,e=n[1]*zn/180):[t/zn*180,e/zn*180]},i}function G(n,t){function e(n,t){var e=Math.sqrt(o-2*i*Math.sin(t))/i
return[e*Math.sin(n*=i),a-e*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i
return e.invert=function(n,t){var e=a-t
return[Math.atan2(n,e)/i,u((o-(n*n+e*e)*i*i)/(2*i))]},e}function J(){function n(n,t){at+=i*n-r*t,r=n,i=t}var t,e,r,i
ft.point=function(o,a){ft.point=n,t=r=o,e=i=a},ft.lineEnd=function(){n(t,e)}}function X(n,t){ut>n&&(ut=n),n>st&&(st=n),lt>t&&(lt=t),t>ct&&(ct=t)}function Q(){function n(n,t){a.push("M",n,",",t,o)}function t(n,t){a.push("M",n,",",t),u.point=e}function e(n,t){a.push("L",n,",",t)}function r(){u.point=n}function i(){a.push("Z")}var o=V(4.5),a=[],u={point:n,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=n},pointRadius:function(n){return o=V(n),u},result:function(){if(a.length){var n=a.join("")
return a=[],n}}}
return u}function V(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Y(n,t){Xn+=n,Qn+=t,++Vn}function Z(){function n(n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o)
Yn+=a*(t+n)/2,Zn+=a*(e+r)/2,Kn+=a,Y(t=n,e=r)}var t,e
ht.point=function(r,i){ht.point=n,Y(t=r,e=i)}}function K(){ht.point=Y}function $(){function n(n,t){var e=n-r,o=t-i,a=Math.sqrt(e*e+o*o)
Yn+=a*(r+n)/2,Zn+=a*(i+t)/2,Kn+=a,a=i*n-r*t,$n+=a*(r+n),nt+=a*(i+t),tt+=3*a,Y(r=n,i=t)}var t,e,r,i
ht.point=function(o,a){ht.point=n,Y(t=r=o,e=i=a)},ht.lineEnd=function(){n(t,e)}}function nn(t){function e(n,e){t.moveTo(n,e),t.arc(n,e,u,0,An)}function r(n,e){t.moveTo(n,e),l.point=i}function i(n,e){t.lineTo(n,e)}function o(){l.point=e}function a(){t.closePath()}var u=4.5,l={point:e,lineStart:function(){l.point=r},lineEnd:o,polygonStart:function(){l.lineEnd=a},polygonEnd:function(){l.lineEnd=o,l.point=e},pointRadius:function(n){return u=n,l},result:n}
return l}function tn(n){function t(n){return(u?r:e)(n)}function e(t){return on(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){E=NaN,k.point=o,t.lineStart()}function o(e,r){var o=h([e,r]),a=n(e,r)
i(E,w,M,x,S,b,E=a[0],w=a[1],M=e,x=o[0],S=o[1],b=o[2],u,t),t.point(E,w)}function a(){k.point=e,t.lineEnd()}function l(){r(),k.point=s,k.lineEnd=c}function s(n,t){o(f=n,p=t),d=E,g=w,v=x,y=S,m=b,k.point=o}function c(){i(E,w,M,x,S,b,d,g,f,v,y,m,u,t),k.lineEnd=a,a()}var f,p,d,g,v,y,m,M,E,w,x,S,b,k={point:e,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),k.lineStart=l},polygonEnd:function(){t.polygonEnd(),k.lineStart=r}}
return k}function i(t,e,r,u,l,s,c,f,p,h,d,g,v,y){var m=c-t,M=f-e,E=m*m+M*M
if(E>4*o&&v--){var w=u+h,x=l+d,S=s+g,b=Math.sqrt(w*w+x*x+S*S),k=Math.asin(S/=b),j=_n(_n(S)-1)<qn||_n(r-p)<qn?(r+p)/2:Math.atan2(x,w),L=n(j,k),N=L[0],T=L[1],P=N-t,I=T-e,z=M*P-m*I;(z*z/E>o||_n((m*P+M*I)/E-.5)>.3||a>u*h+l*d+s*g)&&(i(t,e,r,u,l,s,N,T,j,w/=b,x/=b,S,v,y),y.point(N,T),i(N,T,j,w,x,S,c,f,p,h,d,g,v,y))}}var o=.5,a=Math.cos(30*Bn),u=16
return t.precision=function(n){return arguments.length?(u=(o=n*n)>0&&16,t):Math.sqrt(o)},t}function en(n){var t=tn(function(t,e){return n([t*Cn,e*Cn])})
return function(n){return ln(t(n))}}function rn(n){this.stream=n}function on(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function an(n){return un(function(){return n})()}function un(n){function t(n){return n=u(n[0]*Bn,n[1]*Bn),[n[0]*p+l,s-n[1]*p]}function e(n){return n=u.invert((n[0]-l)/p,(s-n[1])/p),n&&[n[0]*Cn,n[1]*Cn]}function r(){u=W(a=fn(y,m,M),o)
var n=o(g,v)
return l=h-n[0]*p,s=d+n[1]*p,i()}function i(){return c&&(c.valid=!1,c=null),t}var o,a,u,l,s,c,f=tn(function(n,t){return n=o(n,t),[n[0]*p+l,s-n[1]*p]}),p=150,h=480,d=250,g=0,v=0,y=0,m=0,M=0,E=rt,w=j,x=null,S=null
return t.stream=function(n){return c&&(c.valid=!1),c=ln(E(a,f(w(n)))),c.valid=!0,c},t.clipAngle=function(n){return arguments.length?(E=null==n?(x=n,rt):D((x=+n)*Bn),i()):x},t.clipExtent=function(n){return arguments.length?(S=n,w=n?H(n[0][0],n[0][1],n[1][0],n[1][1]):j,i()):S},t.scale=function(n){return arguments.length?(p=+n,r()):p},t.translate=function(n){return arguments.length?(h=+n[0],d=+n[1],r()):[h,d]},t.center=function(n){return arguments.length?(g=n[0]%360*Bn,v=n[1]%360*Bn,r()):[g*Cn,v*Cn]},t.rotate=function(n){return arguments.length?(y=n[0]%360*Bn,m=n[1]%360*Bn,M=n.length>2?n[2]%360*Bn:0,r()):[y*Cn,m*Cn,M*Cn]},Pn.rebind(t,f,"precision"),function(){return o=n.apply(this,arguments),t.invert=o.invert&&e,r()}}function ln(n){return on(n,function(t,e){n.point(t*Bn,e*Bn)})}function sn(n,t){return[n,t]}function cn(n,t){return[n>zn?n-An:-zn>n?n+An:n,t]}function fn(n,t,e){return n?t||e?W(hn(n),dn(t,e)):hn(n):t||e?dn(t,e):cn}function pn(n){return function(t,e){return t+=n,[t>zn?t-An:-zn>t?t+An:t,e]}}function hn(n){var t=pn(n)
return t.invert=pn(-n),t}function dn(n,t){function e(n,t){var e=Math.cos(t),l=Math.cos(n)*e,s=Math.sin(n)*e,c=Math.sin(t),f=c*r+l*i
return[Math.atan2(s*o-f*a,l*r-c*i),u(f*o+s*a)]}var r=Math.cos(n),i=Math.sin(n),o=Math.cos(t),a=Math.sin(t)
return e.invert=function(n,t){var e=Math.cos(t),l=Math.cos(n)*e,s=Math.sin(n)*e,c=Math.sin(t),f=c*o-s*a
return[Math.atan2(s*o+c*a,l*r+f*i),u(f*r-l*i)]},e}function gn(n,t){var e=Math.cos(n),r=Math.sin(n)
return function(i,o,a,u){var l=a*t
null!=i?(i=vn(e,i),o=vn(e,o),(a>0?o>i:i>o)&&(i+=a*An)):(i=n+a*An,o=n-.5*l)
for(var s,c=i;a>0?c>o:o>c;c-=l)u.point((s=M([e,-r*Math.cos(c),-r*Math.sin(c)]))[0],s[1])}}function vn(n,t){var e=h(t)
e[0]-=n,m(e)
var r=a(-e[1])
return((-e[2]<0?-r:r)+2*Math.PI-qn)%(2*Math.PI)}function yn(n){for(var t=1;n*t%1;)t*=10
return t}function mn(n,t,e){var r=Pn.range(n,t-qn,e).concat(t)
return function(n){return r.map(function(t){return[n,t]})}}function Mn(n,t,e){var r=Pn.range(n,t-qn,e).concat(t)
return function(n){return r.map(function(t){return[t,n]})}}function En(n){return n.source}function wn(n){return n.target}function xn(n,t,e,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(r),u=Math.sin(r),s=i*Math.cos(n),c=i*Math.sin(n),f=a*Math.cos(e),p=a*Math.sin(e),h=2*Math.asin(Math.sqrt(l(r-t)+i*a*l(e-n))),d=1/Math.sin(h),g=h?function(n){var t=Math.sin(n*=h)*d,e=Math.sin(h-n)*d,r=e*s+t*f,i=e*c+t*p,a=e*o+t*u
return[Math.atan2(i,r)*Cn,Math.atan2(a,Math.sqrt(r*r+i*i))*Cn]}:function(){return[n*Cn,t*Cn]}
return g.distance=h,g}function Sn(){function t(n,t){var o=Math.sin(t*=Bn),a=Math.cos(t),u=_n((n*=Bn)-e),l=Math.cos(u)
dt+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=i*o-r*a*l)*u),r*o+i*a*l),e=n,r=o,i=a}var e,r,i
gt.point=function(n,o){e=n*Bn,r=Math.sin(o*=Bn),i=Math.cos(o),gt.point=t},gt.lineEnd=function(){gt.point=gt.lineEnd=n}}function bn(n,t){function e(t,e){var r=Math.cos(t),i=Math.cos(e),o=n(r*i)
return[o*i*Math.sin(t),o*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),i=t(r),o=Math.sin(i),a=Math.cos(i)
return[Math.atan2(n*o,r*a),Math.asin(r&&e*o/r)]},e}function kn(n,t){function e(n,t){u>0?-Rn+qn>t&&(t=-Rn+qn):t>Rn-qn&&(t=Rn-qn)
var e=u/Math.pow(o(t),a)
return[e*Math.sin(a*n),u-e*Math.cos(a*n)]}var r=Math.cos(n),o=function(n){return Math.tan(zn/4+n/2)},a=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(o(t)/o(n)),u=r*Math.pow(o(n),a)/a
return a?(e.invert=function(n,t){var e=u-t,r=i(a)*Math.sqrt(n*n+e*e)
return[Math.atan2(n,e)/a,2*Math.atan(Math.pow(u/r,1/a))-Rn]},e):Ln}function jn(n,t){function e(n,t){var e=a-t
return[e*Math.sin(o*n),a-e*Math.cos(o*n)]}var r=Math.cos(n),o=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),a=r/o+n
return _n(o)<qn?sn:(e.invert=function(n,t){var e=a-t
return[Math.atan2(n,e)/o,a-i(o)*Math.sqrt(n*n+e*e)]},e)}function Ln(n,t){return[n,Math.log(Math.tan(zn/4+t/2))]}function Nn(n){var t,e=an(n),r=e.scale,i=e.translate,o=e.clipExtent
return e.scale=function(){var n=r.apply(e,arguments)
return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=i.apply(e,arguments)
return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var a=o.apply(e,arguments)
if(a===e){if(t=null==n){var u=zn*r(),l=i()
o([[l[0]-u,l[1]-u],[l[0]+u,l[1]+u]])}}else t&&(a=null)
return a},e.clipExtent(null)}function Tn(n,t){return[Math.log(Math.tan(zn/4+t/2)),-n]}var Pn={version:"3.4.4"}
Pn.geo={},e.prototype={s:0,t:0,add:function(n){r(n,this.t,In),r(In.s,this.s,this),this.s?this.t+=In.t:this.s=In.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}}
var In=new e,zn=Math.PI,An=2*zn,Rn=zn/2,qn=1e-6,On=qn*qn,Bn=zn/180,Cn=180/zn
Pn.geo.stream=function(n,t){n&&Fn.hasOwnProperty(n.type)?Fn[n.type](n,t):s(n,t)}
var Fn={Feature:function(n,t){s(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)s(e[r].geometry,t)}},Dn={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){c(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)c(e[r],t,0)},Polygon:function(n,t){f(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)f(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)s(e[r],t)}}
Pn.geo.area=function(n){return Un=0,Pn.geo.stream(n,Wn),Un}
var Un,Hn=new e,Wn={sphere:function(){Un+=4*zn},point:n,lineStart:n,lineEnd:n,polygonStart:function(){Hn.reset(),Wn.lineStart=p},polygonEnd:function(){var t=2*Hn
Un+=0>t?4*zn+t:t,Wn.lineStart=Wn.lineEnd=Wn.point=n}},_n=Math.abs
Pn.geo.bounds=function(){function n(n,t){S.push(b=[c=n,p=n]),f>t&&(f=t),t>d&&(d=t)}function t(t,e){var r=h([t*Bn,e*Bn])
if(w){var i=g(w,r),o=[i[1],-i[0],0],a=g(o,i)
m(a),a=M(a)
var l=t-v,s=l>0?1:-1,y=a[0]*Cn*s,E=_n(l)>180
if(E^(y>s*v&&s*t>y)){var x=a[1]*Cn
x>d&&(d=x)}else if(y=(y+360)%360-180,E^(y>s*v&&s*t>y)){var x=-a[1]*Cn
f>x&&(f=x)}else f>e&&(f=e),e>d&&(d=e)
E?v>t?u(c,t)>u(c,p)&&(p=t):u(t,p)>u(c,p)&&(c=t):p>=c?(c>t&&(c=t),t>p&&(p=t)):t>v?u(c,t)>u(c,p)&&(p=t):u(t,p)>u(c,p)&&(c=t)}else n(t,e)
w=r,v=t}function e(){k.point=t}function r(){b[0]=c,b[1]=p,k.point=n,w=null}function i(n,e){if(w){var r=n-v
x+=_n(r)>180?r+(r>0?360:-360):r}else y=n,E=e
Wn.point(n,e),t(n,e)}function o(){Wn.lineStart()}function a(){i(y,E),Wn.lineEnd(),_n(x)>qn&&(c=-(p=180)),b[0]=c,b[1]=p,w=null}function u(n,t){return(t-=n)<0?t+360:t}function l(n,t){return n[0]-t[0]}function s(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var c,f,p,d,v,y,E,w,x,S,b,k={point:n,lineStart:e,lineEnd:r,polygonStart:function(){k.point=i,k.lineStart=o,k.lineEnd=a,x=0,Wn.polygonStart()},polygonEnd:function(){Wn.polygonEnd(),k.point=n,k.lineStart=e,k.lineEnd=r,0>Hn?(c=-(p=180),f=-(d=90)):x>qn?d=90:-qn>x&&(f=-90),b[0]=c,b[1]=p}}
return function(n){d=p=-(c=f=1/0),S=[],Pn.geo.stream(n,k)
var t=S.length
if(t){S.sort(l)
for(var e,r=1,i=S[0],o=[i];t>r;++r)e=S[r],s(e[0],i)||s(e[1],i)?(u(i[0],e[1])>u(i[0],i[1])&&(i[1]=e[1]),u(e[0],i[1])>u(i[0],i[1])&&(i[0]=e[0])):o.push(i=e)
for(var a,e,h=-(1/0),t=o.length-1,r=0,i=o[t];t>=r;i=e,++r)e=o[r],(a=u(i[1],e[0]))>h&&(h=a,c=e[0],p=i[1])}return S=b=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[p,d]]}}(),Pn.geo.centroid=function(n){Gn=Jn=Xn=Qn=Vn=Yn=Zn=Kn=$n=nt=tt=0,Pn.geo.stream(n,et)
var t=$n,e=nt,r=tt,i=t*t+e*e+r*r
return On>i&&(t=Yn,e=Zn,r=Kn,qn>Jn&&(t=Xn,e=Qn,r=Vn),i=t*t+e*e+r*r,On>i)?[NaN,NaN]:[Math.atan2(e,t)*Cn,u(r/Math.sqrt(i))*Cn]}
var Gn,Jn,Xn,Qn,Vn,Yn,Zn,Kn,$n,nt,tt,et={sphere:n,point:w,lineStart:S,lineEnd:b,polygonStart:function(){et.lineStart=k},polygonEnd:function(){et.lineStart=S}}
Pn.rebind=function(n,t){for(var e,r=1,i=arguments.length;++r<i;)n[e=arguments[r]]=L(n,t,t[e])
return n},Pn.merge=function(n){for(var t,e,r,i=n.length,o=-1,a=0;++o<i;)a+=n[o].length
for(e=new Array(a);--i>=0;)for(r=n[i],t=r.length;--t>=0;)e[--a]=r[t]
return e}
var rt=z(N,B,F,[-zn,-zn/2]),it=1e9
Pn.geo.clipExtent=function(){var n,t,e,r,i,o,a={stream:function(n){return i&&(i.valid=!1),i=o(n),i.valid=!0,i},extent:function(u){return arguments.length?(o=H(n=+u[0][0],t=+u[0][1],e=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),a):[[n,t],[e,r]]}}
return a.extent([[0,0],[960,500]])},(Pn.geo.conicEqualArea=function(){return _(G)}).raw=G,Pn.geo.albers=function(){return Pn.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Pn.geo.albersUsa=function(){function n(n){var o=n[0],a=n[1]
return t=null,e(o,a),t||(r(o,a),t)||i(o,a),t}var t,e,r,i,o=Pn.geo.albers(),a=Pn.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Pn.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(n,e){t=[n,e]}}
return n.invert=function(n){var t=o.scale(),e=o.translate(),r=(n[0]-e[0])/t,i=(n[1]-e[1])/t
return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?u:o).invert(n)},n.stream=function(n){var t=o.stream(n),e=a.stream(n),r=u.stream(n)
return{point:function(n,i){t.point(n,i),e.point(n,i),r.point(n,i)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),u.precision(t),n):o.precision()},n.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),u.scale(t),n.translate(o.translate())):o.scale()},n.translate=function(t){if(!arguments.length)return o.translate()
var s=o.scale(),c=+t[0],f=+t[1]
return e=o.translate(t).clipExtent([[c-.455*s,f-.238*s],[c+.455*s,f+.238*s]]).stream(l).point,r=a.translate([c-.307*s,f+.201*s]).clipExtent([[c-.425*s+qn,f+.12*s+qn],[c-.214*s-qn,f+.234*s-qn]]).stream(l).point,i=u.translate([c-.205*s,f+.212*s]).clipExtent([[c-.214*s+qn,f+.166*s+qn],[c-.115*s-qn,f+.234*s-qn]]).stream(l).point,n},n.scale(1070)}
var ot,at,ut,lt,st,ct,ft={point:n,lineStart:n,lineEnd:n,polygonStart:function(){at=0,ft.lineStart=J},polygonEnd:function(){ft.lineStart=ft.lineEnd=ft.point=n,ot+=_n(at/2)}},pt={point:X,lineStart:n,lineEnd:n,polygonStart:n,polygonEnd:n},ht={point:Y,lineStart:Z,lineEnd:K,polygonStart:function(){ht.lineStart=$},polygonEnd:function(){ht.point=Y,ht.lineStart=Z,ht.lineEnd=K}}
Pn.geo.path=function(){function n(n){return n&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),a&&a.valid||(a=i(o)),Pn.geo.stream(n,a)),o.result()}function t(){return a=null,n}var e,r,i,o,a,u=4.5
return n.area=function(n){return ot=0,Pn.geo.stream(n,i(ft)),ot},n.centroid=function(n){return Xn=Qn=Vn=Yn=Zn=Kn=$n=nt=tt=0,Pn.geo.stream(n,i(ht)),tt?[$n/tt,nt/tt]:Kn?[Yn/Kn,Zn/Kn]:Vn?[Xn/Vn,Qn/Vn]:[NaN,NaN]},n.bounds=function(n){return st=ct=-(ut=lt=1/0),Pn.geo.stream(n,i(pt)),[[ut,lt],[st,ct]]},n.projection=function(n){return arguments.length?(i=(e=n)?n.stream||en(n):j,t()):e},n.context=function(n){return arguments.length?(o=null==(r=n)?new Q:new nn(n),"function"!=typeof u&&o.pointRadius(u),t()):r},n.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(o.pointRadius(+t),+t),n):u},n.projection(Pn.geo.albersUsa()).context(null)};[].slice
Pn.geo.transform=function(n){return{stream:function(t){var e=new rn(t)
for(var r in n)e[r]=n[r]
return e}}},rn.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Pn.geo.projection=an,Pn.geo.projectionMutator=un,(Pn.geo.equirectangular=function(){return an(sn)}).raw=sn.invert=sn,Pn.geo.rotation=function(n){function t(t){return t=n(t[0]*Bn,t[1]*Bn),t[0]*=Cn,t[1]*=Cn,t}return n=fn(n[0]%360*Bn,n[1]*Bn,n.length>2?n[2]*Bn:0),t.invert=function(t){return t=n.invert(t[0]*Bn,t[1]*Bn),t[0]*=Cn,t[1]*=Cn,t},t},cn.invert=sn,Pn.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=fn(-n[0]*Bn,-n[1]*Bn,0).invert,i=[]
return e(null,null,1,{point:function(n,e){i.push(n=t(n,e)),n[0]*=Cn,n[1]*=Cn}}),{type:"Polygon",coordinates:[i]}}var t,e,r=[0,0],i=6
return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=gn((t=+r)*Bn,i*Bn),n):t},n.precision=function(r){return arguments.length?(e=gn(t*Bn,(i=+r)*Bn),n):i},n.angle(90)},Pn.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Bn,i=n[1]*Bn,o=t[1]*Bn,a=Math.sin(r),u=Math.cos(r),l=Math.sin(i),s=Math.cos(i),c=Math.sin(o),f=Math.cos(o)
return Math.atan2(Math.sqrt((e=f*a)*e+(e=s*c-l*f*u)*e),l*c+s*f*u)},Pn.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range")
var r,i=[],o=yn(_n(e)),a=-1
if(n*=o,t*=o,e*=o,0>e)for(;(r=n+e*++a)>t;)i.push(r/o)
else for(;(r=n+e*++a)<t;)i.push(r/o)
return i},Pn.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return Pn.range(Math.ceil(o/v)*v,i,v).map(p).concat(Pn.range(Math.ceil(s/y)*y,l,y).map(h)).concat(Pn.range(Math.ceil(r/d)*d,e,d).filter(function(n){return _n(n%v)>qn}).map(c)).concat(Pn.range(Math.ceil(u/g)*g,a,g).filter(function(n){return _n(n%y)>qn}).map(f))}var e,r,i,o,a,u,l,s,c,f,p,h,d=10,g=d,v=90,y=360,m=2.5
return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[p(o).concat(h(l).slice(1),p(i).reverse().slice(1),h(s).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(o=+t[0][0],i=+t[1][0],s=+t[0][1],l=+t[1][1],o>i&&(t=o,o=i,i=t),s>l&&(t=s,s=l,l=t),n.precision(m)):[[o,s],[i,l]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),u>a&&(t=u,u=a,a=t),n.precision(m)):[[r,u],[e,a]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(v=+t[0],y=+t[1],n):[v,y]},n.minorStep=function(t){return arguments.length?(d=+t[0],g=+t[1],n):[d,g]},n.precision=function(t){return arguments.length?(m=+t,c=mn(u,a,90),f=Mn(r,e,m),p=mn(s,l,90),h=Mn(o,i,m),n):m},n.majorExtent([[-180,-90+qn],[180,90-qn]]).minorExtent([[-180,-80-qn],[180,80+qn]])},Pn.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||i.apply(this,arguments)]}}var t,e,r=En,i=wn
return n.distance=function(){return Pn.geo.distance(t||r.apply(this,arguments),e||i.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,n):i},n.precision=function(){return arguments.length?n:0},n},Pn.geo.interpolate=function(n,t){return xn(n[0]*Bn,n[1]*Bn,t[0]*Bn,t[1]*Bn)},Pn.geo.length=function(n){return dt=0,Pn.geo.stream(n,gt),dt}
var dt,gt={sphere:n,point:n,lineStart:Sn,lineEnd:n,polygonStart:n,polygonEnd:n},vt=bn(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(Pn.geo.azimuthalEqualArea=function(){return an(vt)}).raw=vt
var yt=bn(function(n){var t=Math.acos(n)
return t&&t/Math.sin(t)},j);(Pn.geo.azimuthalEquidistant=function(){return an(yt)}).raw=yt,(Pn.geo.conicConformal=function(){return _(kn)}).raw=kn,(Pn.geo.conicEquidistant=function(){return _(jn)}).raw=jn
var mt=bn(function(n){return 1/n},Math.atan);(Pn.geo.gnomonic=function(){return an(mt)}).raw=mt,Ln.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Rn]},(Pn.geo.mercator=function(){return Nn(Ln)}).raw=Ln
var Mt=bn(function(){return 1},Math.asin);(Pn.geo.orthographic=function(){return an(Mt)}).raw=Mt
var Et=bn(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(Pn.geo.stereographic=function(){return an(Et)}).raw=Et,Tn.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Rn]},(Pn.geo.transverseMercator=function(){var n=Nn(Tn),t=n.center,e=n.rotate
return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[-n[1],n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},n.rotate([0,0])}).raw=Tn,"function"==typeof define&&define.amd?define(Pn):"object"==typeof t&&t.exports?t.exports=Pn:this.d3=Pn}()}()},{}],46:[function(n,t,e){var r=n("idris-geojson-points")
t.exports=function(n,t){r(n,function(n){var e=1/0,r=1/0,o=-(1/0),a=-(1/0)
for(i=0;i<n.length;i++)n[i][0]>o&&(o=n[i][0]),n[i][0]<e&&(e=n[i][0]),n[i][1]>a&&(a=n[i][1]),n[i][1]<r&&(r=n[i][1])
t([e,r,o,a])})}},{"idris-geojson-points":47}],47:[function(n,t,e){function r(n,t,e,o){if(n===t.length)o(e)
else{var a=t[n]
if(void 0!==a.geometry){var u=a.geometry.type,l=a.geometry.coordinates
if("Point"===u)e.push(l)
else if("LineString"===u)for(i=0;i<l.length;i++)e.push(l[i])
else if("Polygon"===u)for(i=0;i<l.length;i++)for(j=0;j<l[i].length;j++)e.push(l[i][j])
else if("MultiPoint"===u)for(i=0;i<l.length;i++)e.push(l[i])
else if("MultiLineString"===u)for(i=0;i<l.length;i++)for(j=0;j<l[i].length;j++)e.push(l[i][j])
else if("MultiPolygon"===u)for(i=0;i<l.length;i++)for(j=0;j<l[i].length;j++)for(k=0;k<l[i][j].length;k++)e.push(l[i][j][k])}n+=1,Math.floor(n/100)===Math.floor(n/100)?setTimeout(function(){r(n,t,e,o)},1):r(n,t,e,o)}}t.exports=function(n,t){r(0,n.features,[],function(n){t(n)})}},{}],48:[function(n,t,e){function r(n){var t=o(n[0]+1,n[2]),e=o(n[0],n[2]),r=a(n[1]+1,n[2]),i=a(n[1],n[2])
return[e,r,t,i]}function i(n){var t=r(n),e={type:"Polygon",coordinates:[[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]],[t[0],t[1]]]]}
return e}function o(n,t){return n/Math.pow(2,t)*360-180}function a(n,t){var e=Math.PI-2*Math.PI*n/Math.pow(2,t)
return E*Math.atan(.5*(Math.exp(e)-Math.exp(-e)))}function u(n,t,e){var r=m(n,t,e)
return r[0]=Math.floor(r[0]),r[1]=Math.floor(r[1]),r}function l(n){return[[2*n[0],2*n[1],n[2]+1],[2*n[0]+1,2*n[1],n[2]+1],[2*n[0]+1,2*n[1]+1,n[2]+1],[2*n[0],2*n[1]+1,n[2]+1]]}function s(n){return n[0]%2===0&&n[1]%2===0?[n[0]/2,n[1]/2,n[2]-1]:n[0]%2===0&&!n[1]%2===0?[n[0]/2,(n[1]-1)/2,n[2]-1]:!n[0]%2===0&&n[1]%2===0?[(n[0]-1)/2,n[1]/2,n[2]-1]:[(n[0]-1)/2,(n[1]-1)/2,n[2]-1]}function c(n){return l(s(n))}function f(n,t){for(var e=c(n),r=0;r<e.length;r++)if(!p(t,e[r]))return!1
return!0}function p(n,t){for(var e=0;e<n.length;e++)if(h(n[e],t))return!0
return!1}function h(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function d(n){for(var t="",e=n[2];e>0;e--){var r=0,i=1<<e-1
0!==(n[0]&i)&&r++,0!==(n[1]&i)&&(r+=2),t+=r.toString()}return t}function g(n){for(var t=0,e=0,r=n.length,i=r;i>0;i--){var o=1<<i-1
switch(n[r-i]){case"0":break
case"1":t|=o
break
case"2":e|=o
break
case"3":t|=o,e|=o}}return[t,e,r]}function v(n){var t=u(n[0],n[1],32),e=u(n[2],n[3],32),r=[t[0],t[1],e[0],e[1]],i=y(r)
if(0===i)return[0,0,0]
var o=r[0]>>>32-i,a=r[1]>>>32-i
return[o,a,i]}function y(n){for(var t=28,e=0;t>e;e++){var r=1<<32-(e+1)
if((n[0]&r)!=(n[2]&r)||(n[1]&r)!=(n[3]&r))return e}return t}function m(n,t,e){var r=Math.sin(t*M),i=Math.pow(2,e),o=i*(n/360+.5),a=i*(.5-.25*Math.log((1+r)/(1-r))/Math.PI)
return[o,a,e]}var M=Math.PI/180,E=180/Math.PI
t.exports={tileToGeoJSON:i,tileToBBOX:r,getChildren:l,getParent:s,getSiblings:c,hasTile:p,hasSiblings:f,tilesEqual:h,tileToQuadkey:d,quadkeyToTile:g,pointToTile:u,bboxToTile:v,pointToTileFraction:m}},{}]},{},[1])
